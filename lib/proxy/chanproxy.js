/*! chanarchive - v0.3.2 - 2014-10-27 */"use strict";function a(a){h=require("./proxies/"+a),this.app=g,this.port=8088,this.server=void 0}var b=require("express"),c=require("request"),d=require("../../package").version,e={"User-Agent":"Chanarchive/"+d},f=require("cheerio"),g=b(),h;g.get("/",function(a,b){if(a.query.url){var d=a.query.url,g={posts:[]},i={url:d,method:"GET",headers:e};c(i,function(a,c,d){if(a)b.send(a);else{var e=f.load(d);e(h.postClass).each(function(a,b){var c=h.postHandler(e(b),e);g.posts.push(c)}),b.send(g)}})}else b.send({})}),a.prototype.start=function(a){var b=a||function(){};this.server=this.app.listen(this.port,b),console.log("ChanProxy started at port "+this.port)},a.prototype.stop=function(){this.server.close(),console.log("ChanProxy stopped")},exports=module.exports=a;