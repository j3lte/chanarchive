/*
 ----- chanarchive - version 0.4.0 -----
Last build date : 2014-12-17
Source : https://github.com/j3lte/chanarchive
*/
"use strict";function a(a,c){var f,g=null;if(e.test(a)){var h=a.split("/");f=d[h[0]],g=f.templateUrl.replace("%s",h[1]).replace("%s",h[2]),c(f,g)}else f=b.find(d,function(b){return b.regEx.test(a)}),c(f,g)}var b=require("lodash"),c=function(a){var c=this,d=c._originalFilenames?a.filename+"_"+a.tim:a.tim,e=d+a.ext,f=a.fileUrl||c.picUrl+c.board+"/src/"+a.tim+a.ext;!f||c._extensions&&-1===c._extensions.indexOf(a.ext)||c.addFile(f,e),a.extra_files&&a.extra_files.length&&b.each(a.extra_files,function(a){c.imagePostHandler(a)})},d={"4chan":{alias:"4chan",templateUrl:"http://boards.4chan.org/%s/thread/%s",regEx:/^http:\/\/boards\.4chan\.org\/(\w)+\/thread\/(\d)+/,baseUrl:"http://a.4cdn.org/",del:"/thread/",picUrl:"http://images.4chan.org/",b:5,t:7,imagePostHandler:c},"7chan":{alias:"7chan",templateUrl:"http://7chan.org/%s/res/%s.html",regEx:/^http:\/\/7chan\.org\/(\w)+\/res\/(\d+)\.html/,b:4,t:6,useProxy:"7chan",imagePostHandler:c},"8chan":{alias:"8chan",templateUrl:"https://8chan.co/%s/res/%s.html",regEx:/^https:\/\/8chan\.co\/(\w)+\/res\/(\d+)\.html.*/,baseUrl:"https://8chan.co/",del:"/res/",picUrl:"https://8chan.co/",b:4,t:6,imagePostHandler:c},"420chan":{alias:"420chan",templateUrl:"http://boards.420chan.org/%s/res/%s.php",regEx:/^http:\/\/boards\.420chan\.org\/(\w){1,}\/res\/(\d){1,}\.php.*/,baseUrl:"http://api.420chan.org/",del:"/res/",picUrl:"http://boards.420chan.org/",b:5,t:7,imagePostHandler:function(a){var b=this,c=a.filename+a.ext,d=b.picUrl+b.board+"/src/"+a.filename+a.ext;b.addFile(d,c)}}},e=/(4|7|8|420)chan\/(\w+)\/(\d+)/;module.exports.get=a;